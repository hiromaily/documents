# Fargate

AWS Fargate と AWS Lambda は、どちらもサーバーレスコンピューティングを実現するためのサービスだが、異なるユースケースやアーキテクチャに向いている。

## AWS Fargate

### Fargate の概要

AWS Fargate はコンテナオーケストレーションサービスである Amazon ECS（Elastic Container Service）または Amazon EKS（Elastic Kubernetes Service）のコンテナを実行するためのサーバーレスコンピューティングエンジン。Fargate を使うことで、サーバー群の管理やスケーリングに関する手間を省きつつコンテナアプリケーションをデプロイできる。

### Fargate の特徴

1. **サーバレス実行:** 管理すべきインフラストラクチャがなく、仮想マシンやクラスタのプロビジョニングが不要。
2. **スケーラビリティ:** 自動的にスケーリングする。負荷に応じて数千のコンテナを効率的に管理できる。
3. **統合:** Amazon ECS や Amazon EKS とシームレスに統合されているため、既存のツールやワークフローを変更せずに利用できる。
4. **コスト効率:** 実行中のコンテナに対して支払いを行うため、リソースの無駄を抑えられる。

### Fargate のユースケース

- マイクロサービスアーキテクチャ
- データ処理ワークフロー
- Web アプリケーションのバックエンド
- CI/CD パイプラインの一部として

## AWS Lambda

### Lambda の概要

AWS Lambda はイベント駆動型のサーバーレスコンピューティングサービスで、コードを任意のイベントに基づいて自動的に実行する。開発者はコードをアップロードするだけで、Lambda がすべての実行基盤（スケーリング、パッチ適用、インフラの管理）を管理する。

### Lambda の特徴

1. **イベント駆動:** イベント発生時にトリガーされる関数を作成でき、AWS の様々なサービス（S3、DynamoDB、API Gateway など）と連携できる。
2. **自動スケーリング:** リクエスト数に応じて自動でスケーリングし、ピンポイントで容量を変動させる。
3. **管理不要:** インフラストラクチャ管理の必要がなく、コードのデプロイだけで動作する。
4. **従量課金:** 実行時間と実行回数に基づく細粒度の課金体系で、コスト効率に優れている。

### Lambda のユースケース

- リアルタイムファイル処理
- データトランスフォーメーション
- サーバーレスアーキテクチャの一部としてのバックエンドロジック
- IoT デバイスのデータ処理

## Fargate と Lambda の違い

1. **実行モデル:**

   - **Fargate:** コンテナベースのアプリケーションを長時間実行できる。より複雑なアプリケーションやサービスのバックエンドに向いている。
   - **Lambda:** 短時間（最大 15 分）の関数実行に特化している。イベント駆動型で、頻繁な高並列イベント処理に適している。

2. **管理性:**

   - **Fargate:** コンテナ化されたアプリケーションやマイクロサービスの運用に適しているが、ECS/EKS のタスク定義やコンテナイメージの管理が必要。
   - **Lambda:** 完全に管理された形でコードを実行でき、インフラやスケーリングの管理は一切不要。

3. **スケーリング:**

   - **Fargate:** 任意のコンテナ数を手動またはオートスケーリングでスケールする。
   - **Lambda:** リクエスト数に応じて、関数を即座にスケールする。

4. **コスト:**
   - **Fargate:** 実行中のタスク（コンテナ）に対して支払うため、長時間実行されるワークロードに対してコスト効果が出やすい。
   - **Lambda:** 実行時間と呼び出し回数に基づくため、短時間で多くのリクエストが発生するワークロードでコスト効果がある。
