# App Runner

完全マネージドのサービスで、`開発者がアプリケーションコードをアップロードするだけでウェブアプリケーションやAPIを迅速にデプロイし、運用できるプラットフォーム`。インフラ管理やコンフィギュレーションの手間を省き、アプリケーション開発に集中できるように設計されている。

クラウドインフラの管理を簡素化し、アプリケーションのデプロイとスケーリングを迅速に行うための強力なツール。開発者がインフラストラクチャの運用に煩わされることなく、アプリケーション開発に集中できる環境を提供する。固定インフラ管理が少なく、スケーラビリティとセキュリティが確保されるため、`小規模から中規模のプロジェクト`や、`開発スピードを重視するスタートアップ`に特に適している。

## 特徴

1. **簡単なデプロイ**
   - ソースコードやコンテナイメージを指定するだけで、自動的にインスタンスを起動、設定、スケーリングしてアプリケーションをデプロイする。

2. **自動スケーリング**
   - トラフィックの増減に応じてインスタンスを自動的にスケーリング。開発者はインフラのスケーリング設定を気にする必要がない。

3. **運用管理が不要**
   - インフラのプロビジョニング、パッチ適用、モニタリング、スケーリング、ロードバランシングなどが自動的に行われる。

4. **高可用性**
   - 高可用性のアーキテクチャが組み込まれており、ダウンタイムを最小限に抑えることができる。

5. **統合されたCI/CD**
   - AWS CodePipeline、AWS CodeBuildなどのCI/CDツールとシームレスに統合できる。GitHubやAWS CodeCommitなどのリポジトリをソースとして使用可能。

6. **セキュリティとコンプライアンス**
   - IAMポリシーを利用して細かいアクセス制御を設定可能。TLSを使ったセキュアな通信も標準でサポート。

## 主要コンポーネント

1. **サービス**
   - アプリケーションのデプロイ先となる論理的単位。サービスは指定されたソースからアプリケーションを起動し、設定に基づいて動的にスケールする。

2. **ソース**
   - アプリケーションのソースコード。GitHubリポジトリやAWS CodeCommitリポジトリ、もしくはコンテナレジストリが指定可能。

3. **ビルドとデプロイ**
   - ソースコードからアプリケーションをビルドし、サービスとしてデプロイする。連続した更新とロールバックのためのバージョン管理も行われる。

## AWS App Runnerの使用手順

### 1. サービスの作成

1. **AWSコンソールにログイン**
   - AWSマネジメントコンソールにログインし、App Runnerのダッシュボードにアクセス。

2. **サービスの作成**
   - 「Create a service」をクリックし、ソースを選択（GitHub、AWS CodeCommit、またはコンテナレジストリ）。

3. **ソースの設定**
   - リポジトリの場所やブランチを指定し、デプロイメント設定、ビルド設定（Dockerファイル、ビルドコマンドなど）を入力。

4. **サービスの設定**
   - サービス名、インスタンスサイズ、接続先情報、環境変数などの設定を行う。

5. **デプロイ**
   - 設定が完了したら、「Create and deploy」をクリックし、サービスのデプロイを開始。

### 2. 管理とモニタリング

1. **ダッシュボード確認**
   - サービスのステータスやパフォーマンスをApp Runnerダッシュボードから確認。

2. **ロギング**
   - デプロイと実行中のログを確認し、問題が発生した場合はトラブルシューティングを実施。

3. **自動スケーリング**
   - トラフィックの状況に応じてインスタンスが自動的にスケールされる。設定から手動でスケールアップ/スケールダウンも可能。

### 3. CI/CD パイプラインの設定

1. **CI/CDツールとの統合**
   - AWS CodePipelineやAWS CodeBuildと統合し、ソースコードの変更がリポジトリにプッシュされるたびに自動的にビルド＆デプロイされるように設定。

2. **エンドポイントとセキュリティ**
   - カスタムドメインを設定して、HTTPSを有効にすることや、IAMロールを使って細かいアクセス制御を設定。

## メリットとデメリット

**メリット**

- **運用管理の簡素化**：インフラ管理の手間が省けるため、運用コストが削減される。
- **スケーラブル**：自動スケーリング機能により、トラフィックの増減に迅速に対応。
- **統合ツール**：CI/CDツールとのシームレスな統合でデプロイメントが簡単。
- **高可用性**：内蔵された高可用性機能により、アプリケーションのダウンタイムを最小限に抑える。

**デメリット**

- **カスタマイズ性の限界**：特定の要件やカスタマイズが求められる場合、制限がある。
- **コスト**：特に大規模トラフィックに対応する場合や、頻繁なスケーリングが発生する場合、コストが増える可能性がある。

## 具体的な使用例

1. **ウェブアプリケーション**
   - 単一または複数のコンテナで稼働するウェブアプリケーションのホスティング。

2. **RESTful API**
   - APIバックエンドの迅速なデプロイとスケーリング。

3. **マイクロサービス**
   - 各サービス/コンテナが独立してスケール可能なマイクロサービスアーキテクチャの構築。

4. **開発・テスト環境**
   - アプリケーションの開発やテスト環境の迅速なセットアップ。

## App Runner まとめ

`AWS App Runner` は、ソースコードまたはコンテナイメージから AWS クラウド内のスケーラブルで安全なウェブアプリケーションに直接デプロイするための、高速でシンプルで費用対効果の高い方法を提供する AWS サービス

App Runner は、コードまたはイメージリポジトリに直接接続する。フルマネージド型のオペレーション、高性能、スケーラビリティ、セキュリティを備えた自動統合および配信パイプラインを提供する。

## References

- [AWS App Runner](https://aws.amazon.com/jp/apprunner/)
- [What is App Runner](https://docs.aws.amazon.com/ja_jp/apprunner/latest/dg/what-is-apprunner.html)
