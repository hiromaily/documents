# AWS DynamoDB

Amazon DynamoDBは、Amazon Web Services（AWS）が提供するフルマネージド型の`NoSQLデータベース`サービス。DynamoDBは高いパフォーマンスと可用性を持ちながら、大規模なデータストレージおよび検索に対応している。主な用途としては、リアルタイムの業務アプリケーション、IoT、モバイルバックエンド、ゲーム、電子商取引のシステムが挙げられる。

## 主要な特徴

1. **フルマネージドサービス**：
   - インフラ管理（ハードウェアの調達、セットアップ、構成、パッチ適用、およびサーバーの運用・保守）をAWSが担当。

2. **スケーラビリティ**：
   - ストレージとスループットは自動的にスケールアップ/スケールダウンする。従来のRDBMSのように手動で構成変更を行う必要がない。

3. **高速性能**：
   - 数ミリ秒のレイテンシーで読み書き操作が可能であり、非常に高速。

4. **柔軟なデータモデル**：
   - キーバリューストアおよびドキュメントデータベースとして使用できる。JSON形式でデータを保存し、任意の属性を持つ柔軟なデータモデルがサポートされている。

5. **高い可用性と耐障害性**：
   - データは複数のリージョンやアベイラビリティゾーンに自動的にレプリケートされ、高い可用性を提供する。

6. **セキュリティとコンプライアンス**：
   - データ暗号化、Amazon VPCとの統合、IAMによるアクセス管理、統合されたモニタリング機能（AWS CloudTrail/AWS CloudWatch）等のセキュリティ機能が提供されている。

## データモデル

- **テーブル (Table)**: データのコレクション。各テーブルは名前とプライマリキー属性を持つ。
- **アイテム (Item)**: テーブル内の個々のエントリ。キーと属性を持つ。
- **属性 (Attribute)**: アイテムのプロパティ。
- **プライマリキー (Primary Key)**:
  - **パーティションキー (Partition Key)のみ**：単一の属性からなる。
  - **パーティションキーとソートキー (Sort Key)**：2つの属性からなる複合キー。

## データ統合とクエリ

DynamoDBはデータの読み取りと書き込みを効率的に行うために、以下のようなクエリオプションを提供している：

- **GetItem, Query, Scan**: データを取得。
- **PutItem, BatchWriteItem, UpdateItem, DeleteItem**: データを操作。

## 課金モデル

DynamoDBの課金モデルは2タイプある：

1. **オンデマンドキャパシティモード**：読み取り・書き込みに対して実際に使用したリクエスト数に基づいて課金。
2. **プロビジョンキャパシティモード**：事前に設定したキャパシティユニットに基づいて課金。

## グローバルセカンダリインデックス (GSI)とローカルセカンダリインデックス (LSI)

- **GSI**: 異なるパーティションキーまたはソートキーを持つインデックス。更新速度がデフォルトテーブルとは独立。
- **LSI**: 元のパーティションキーを共有しながら異なるソートキーを持つインデックス。

## その他の特徴

- **DynamoDB Streams**：テーブルに対して行われた変更をリアルタイムでキャプチャする機能。
- **トランザクション**：アトミックな一貫性のある操作を保証するためのトランザクションサポート。
- **DynamoDB Accelerator (DAX)**：高速キャッシュ機能が提供され、さらにミリ秒未満のレイテンシーを実現。

## ローカル環境での使用

- [DynamoDB local](https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/DynamoDBLocal.html)を使うことができる。
- [LocalStack](https://github.com/localstack/localstack)
