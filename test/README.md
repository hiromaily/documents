# Test

## テストの種類

- Unit Test (単体テスト)
  - 非常に詳細なレベルのアプリケーションのソースに近いテストであり、ソフトウェアで使用されるクラス、コンポーネント、モジュールの個々のメソッドや機能のテストで構成されまる。これは一般に比較的安価で自動化できる
- Integration Test (結合テスト)
  - アプリケーションで使用されるさまざまなモジュールやサービスが全体として良好に機能することを確認する。たとえば、データベースとの相互作用のテストや、マイクロサービスが期待どおりに連携して動作することを確認する場合などを指す。
- E2E Test (エンドツーエンド テスト)
  - 完全なアプリケーション環境にあるソフトウェアを使用してユーザーの動作を再現する。さまざまなユーザーフローが期待どおりに動作し、ウェブページの取り込みやログインと同じくらい簡単に実行できることを検証し、さらに複雑なシナリオで電子メール通知やオンライン決済などを検証する。
- 受け入れテスト
  - 受け入れテストは、システムがビジネス要件を満たしているかどうかを検証する正式なテスト。これらのテストではアプリケーション全体を実行する必要があり、ユーザーの動作の再現に焦点を当てる
- パフォーマンス テスト
  - パフォーマンス テストでは、特定のワークロード下におけるシステムの動作を評価する。これらのテストはアプリケーションの信頼性、速度、拡張性、応答性を測定するのに役立つ。たとえば、パフォーマンス テストでは多数のリクエストを実行する際の応答時間を観察、または大量のデータでシステムがどのように動作するかを確認できる。アプリケーションがパフォーマンス要件を満たしているかどうかを判断、ボトルネックを特定、ピーク トラフィック時の安定性を測定などできる。
- スモーク テスト
  - スモーク テストはアプリケーションの基本機能を確認する基本的なテスト。このテストは迅速に実行できるようになっており、その目的はシステムの主要な機能が期待どおりに動作するかを確認すること。スモーク テストは、新しいビルドが作成された直後により高価なテストを実行できるかどうかを決定したり、デプロイ直後に新しくデプロイされた環境でアプリケーションが適切に実行されていることを確認したりする場合に使用する。

## 品質を測るためのテスト

- 機能テスト
- 性能テスト
- 負荷テスト
- ユーザビリティテスト
- セキュリティーテスト

## テストダブル

テストダブル (Test Double) とは、ソフトウェアテストにおいて、テスト対象が依存しているコンポーネントを置き換える代用品のこと。ダブルは代役、影武者を意味する。

### テストダブルの種類は以下の通り

- スタブ
- モック
- スパイ
- フェイク
- ダミー

[テストダブルをなんとなく理解する](https://qiita.com/kaleidot725/items/075934e8e6be902a7fe1)

### スタブとモックの違い

- [What's the difference between stub and mock in Go unit testing?](https://stackoverflow.com/questions/53360256/whats-the-difference-between-stub-and-mock-in-go-unit-testing)

```go
type Calculator interface {
    Add(x, y int) int
}

type CalculatorMock struct{}

func (c *CalculatorMock) Add(x, y int) int {
    return x + y
}

type CalculatorStub struct {
    result int
}

func (c *CalculatorStub) Add(x, y int) int {
    return c.result
}
```

### stub:スタブ

- `テスト実行中に使用される、コード内の依存関係を置き換えるもの`。スタブは通常、ある特定のテストのために作られ、期待値や仮定がハードコードされているため、別のテストに再利用することできない。

この例では、`CalculatorStub`は、常にresultフィールドで指定された所定の結果を返すCalculatorインターフェイスのスタブ実装。これは、入力が異なると出力が異なるCalculatorインターフェイスに依存するコード片の動作をテストしたいとき、出力が常に同じである特定のケースをテストしたいときに便利です。

### モック

mockは`stubを高機能化したもの`で、設定手段を追加し、テストによって異なる期待値を設定できるようにしたもの。そのため、モックはより複雑になるが、異なるテストに対して再利用することができる。  
Interfaceを満たす別実装という見方もできる？

この例では、`CalculatorMock`は、常に入力パラメータの合計を返すCalculatorインターフェイスのモック実装である。これは、Calculatorインターフェイスに依存するコードの一部の動作を、実際の実装を使用せずにテストしたい場合に便利。
