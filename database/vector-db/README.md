# Vector Database

ベクターデータベース（Vector Database）は、高次元数値ベクトルの格納と検索を効率的に行うためのデータベースシステム。これらのシステムは、特に機械学習、自然言語処理（NLP）、画像検索、リコメンデーションシステムなどで重要な役割を果たしている

ベクターデータベースは高次元ベクトルデータを効率的に管理し、高速な検索や類似度計算を提供するための専門的なデータベースシステムで、これにより、機械学習や NLP、画像検索などの分野で大規模データの処理を効果的に行うことが可能となる。効率的なインデックス作成や近似検索アルゴリズムを使用することで、多次元データの効率的な検索が実現されている。

## ベクターデータベースの基本概念

ベクターデータベースは、データを高次元ベクトルとして表現し、それらのベクトルに対して効率的な検索や類似度計算を行う。この種のデータベースは主に、以下のようなタスクに利用される

1. **類似検索**:

   - 類似データ（例えば、類似ドキュメントや画像）を高速に検索する
   - 例: 類似画像検索、テキストの類似度検索

2. **最近傍探索（Nearest Neighbor Search）**:

   - クエリベクトルの最も近いベクトル（最近傍）を見つける
   - 例: 物体検出、NLP での単語埋め込み

3. **クラスタリング**:
   - ベクトルの集合をクラスタリングすることで、データパターンを見つける
   - 例: レコメンデーションシステムでのユーザーモデリング

## ベクターデータベースの特性

ベクターデータベースには以下の特性が求められる

- **高次元データの効率的な処理**: 数十、数百、場合によっては数千次元のベクトルを扱う
- **迅速な類似度計算**: コサイン類似度、ユークリッド距離、マンハッタン距離などを効率的に計算する
- **スケーラビリティ**: 大量のデータを迅速に処理するためのスケーラビリティが求められる

## 一般的なアルゴリズムと技法

ベクターデータベースでは、効率的な検索と処理のために以下の技法やアルゴリズムが使われる

1. **フィルタリング技法**: データを部分集合に分けることで、検索空間を縮小する

   - ボールツリ（Ball Tree）
   - k-d ツリ（k-d Tree）

2. **近似検索アルゴリズム**: 完全一致ではなく近似的に近いベクトルを見つける方法。

   - 局所センシティブハッシング（LSH：Locality-Sensitive Hashing）
   - アニリスべースド近傍検索（ANNS：Approximate Nearest Neighbor Search）

3. **インデックス作成**: 高次元データの高速アクセスのためのデータ構造。
   - HNSW（Hierarchical Navigable Small World graphs）
   - IVF（Inverted File Index）

## 代表的なベクターデータベースシステム

これらのベクトルデータベースは、セマンティック検索、推奨システム、画像およびビデオ分析、AI 搭載チャットボットなど、さまざまなアプリケーションで広く使用されている。リアルタイム更新、スケーラビリティ、一般的な機械学習フレームワークとの統合などの機能を備えており、2025 年には研究環境と本番環境の両方に適している。

1. **Elasticsearch**:
   - ベクターデータベース機能を備えたマルチモデル検索エンジン
2. **Pinecone**:
   - スケーラビリティとリアルタイムのデータ取り込みで知られる、フルマネージドベクターデータベース。
   - 高次元ベクトルのためのクラウドベースのベクターデータベース。不揮発性ストレージとリアルタイムの類似検索を提供する
   - [Local development with Pinecone Local](https://docs.pinecone.io/guides/operations/local-development)
3. **Milvus**:
   - AIおよび分析ワークロード向けに設計されたオープンソースベクターデータベース。
   - 大規模なデータを扱うために最適化されたオープンソースベクターデータベース。AI や機械学習のワークロードに特化している
   - [DockerでMilvusを起動する](https://milvus.io/docs/ja/install_standalone-docker.md)
4. **Chroma**:
   - 最新のAIアプリケーション向けに特別に設計された、急速に成長しているベクターデータベース。
   - [Docker](https://docs.trychroma.com/production/containers/docker)
5. **Weaviate**:
   - AIを活用したタスクを簡素化するクラウドネイティブのオープンソースベクターデータベース。
   - [Docker](https://weaviate.io/developers/weaviate/installation/docker-compose)
6. **Qdrant**:
   - 広範なフィルタリング機能で知られるベクター類似性検索エンジン。
   - オープンソースのRust製ベクトル検索エンジン
   - [How to Get Started with Qdrant Locally](https://qdrant.tech/documentation/quickstart/)
7. **FAISS （Facebook AI Similarity Search）** (Facebook AI 類似検索):
   - 類似検索と高密度ベクトルのクラスタリングに最適化されたライブラリ。
   - Facebook によって開発されたオープンソースのベクターデータベース。大規模なベクトルの類似検索を可能にする
8. **Couchbase**:
   - ベクトルデータベース機能を備えたマルチモデルデータベース。
9. **Vespa**:
   - マルチモデル検索エンジンとベクトルデータベース。
10. **Deep Lake**:
    - グラフ表現とベクトルストレージを組み合わせたベクトルデータベース。

### その他

1. PostgreSQL + pgvector
2. **Annoy**（Approximate Nearest Neighbors Oh Yeah）:
   - 特徴: Spotify が開発したオープンソースライブラリで、主に高速な近似最近傍探索を提供する

## WIP: ElasticsearchをVector Databaseとして利用する


## 応用例

- **リコメンデーションシステム**: ユーザーの行動データをベクトル化し、好みの似たユーザーやアイテムを推薦。
- **画像検索**: 画像の特徴量をベクトル化し、類似画像の検索を効率的に行う。
- **自然言語処理（NLP）**: 文書や単語の埋め込みベクトルを使用した意味検索やクラスタリング。

## References

- [ベクトルデータベースとして使える RDB、ベクトル検索と RAG への応用を学ぶ](https://xtech.nikkei.com/atcl/nxt/column/18/03004/122000004/)
