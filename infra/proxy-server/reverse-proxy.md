# Reverse Proxy

リバースプロキシとは、Web サーバの前に置かれ、クライアント（ウェブブラウザなど）からのリクエストを Web サーバに転送するサーバのこと。リバースプロキシは通常、セキュリティ、パフォーマンス、信頼性を向上させるために実装される。

## プロキシサーバーとは

`フォワードプロキシ`は、しばしばプロキシ、プロキシサーバ、または Web プロキシと呼ばれ、`クライアントマシンのグループの前に座っているサーバ`。これらのコンピュータがインターネット上のサイトやサービスにリクエストを出すと、プロキシサーバはそれらのリクエストをインターセプトし、仲介者のようにクライアントに代わって Web サーバと通信を行う。

### プロキシサーバーの用途

#### 国や組織による閲覧制限を回避する

政府、学校、その他の組織の中には、ファイアウォールを使用して、ユーザーに限定されたバージョンのインターネットへのアクセスを許可しているところがある。このような制限を回避するために、フォワードプロキシが利用できる。

#### 特定のコンテンツへのアクセスをブロックする

逆に、プロキシは、特定のサイトへのアクセスからユーザーグループをブロックするように設定することもできる。例えば、学校のネットワークでは、コンテンツフィルタリングルールを有効にするプロキシを経由してウェブに接続し、フェイスブックやその他のソーシャルメディアサイトからの応答を転送しないように設定することができる。

#### ネット上での自分のアイデンティティを守るため

一般のインターネット・ユーザーが単にネット上での匿名性を高めたいと望んでいる場合もあるが、政治的反体制派に対して政府が深刻な結果を課す可能性のある場所にインターネット・ユーザーが住んでいる場合もある。ウェブ・フォーラムやソーシャルメディア上で政府を批判することは、これらのユーザーにとって罰金や投獄につながる可能性がある。このような反体制派の一人が、政治的に敏感なコメントを投稿するウェブサイトに接続するためにフォワードプロキシを使っている場合、コメントの投稿に使われた IP アドレスから反体制派を突き止めることは難しくなる。プロキシサーバーの IP アドレスだけが見えるようになる。

## リバースプロキシとの違い

リバースプロキシは、`1つまたは複数のWebサーバの前に置かれ`、クライアントからのリクエストをインターセプトするサーバである。これは、プロキシがクライアントの前に位置するフォワードプロキシとは異なる。リバースプロキシでは、クライアントがウェブサイトのオリジンサーバーにリクエストを送信すると、そのリクエストはリバースプロキシサーバーによってネットワークエッジでインターセプトされる。リバースプロキシサーバは、オリジンサーバにリクエストを送信し、オリジンサーバからレスポンスを受信する。

フォワードプロキシはクライアントの前に置かれ、オリジンサーバがその特定のクライアントと直接通信することがないようにする。一方、リバースプロキシはオリジンサーバーの前に置かれ、どのクライアントもそのオリジンサーバーと直接通信しないようにする。

### リバースプロキシの利点

#### ロードバランシング

毎日何百万人ものユーザーを獲得する人気ウェブサイトは、単一のオリジンサーバーですべての受信サイトトラフィックを処理できない場合がある。その代わりに、サイトは異なるサーバーのプールに分散され、すべてが同じサイトへのリクエストを処理することができる。この場合、リバースプロキシは、単一のサーバーが過負荷になるのを防ぐために、異なるサーバー間で受信トラフィックを均等に分散する負荷分散ソリューションを提供することができる。サーバーが完全に故障した場合は、他のサーバーがトラフィックを処理するためにステップアップすることができる。

#### 攻撃からの保護

リバースプロキシが設置されていれば、ウェブサイトやサービスはオリジンサーバーの IP アドレスを明かす必要がない。そのため、攻撃者が DDoS 攻撃などの標的型攻撃を行うことが非常に難しくなる。その代わり、攻撃者は Cloudflare の CDN のようなリバースプロキシだけを標的にすることができ、リバースプロキシはより厳重なセキュリティとサイバー攻撃を撃退するためのより多くのリソースを持つことになる。

#### グローバルサーバーロードバランシング（GSLB）

この形式のロードバランシングでは、ウェブサイトを世界中の複数のサーバーに分散させることができ、リバースプロキシは地理的に最も近いサーバーにクライアントを送る。これにより、リクエストとレスポンスが移動する距離が短縮され、ロード時間が最小化される。

#### キャッシュ

リバースプロキシはコンテンツをキャッシュすることもでき、より高速なパフォーマンスを実現する。例えば、パリのユーザーがロサンゼルスのウェブサーバーがあるリバースプロキシされたウェブサイトを訪問した場合、ユーザーは実際にパリのローカルリバースプロキシサーバーに接続し、そのリバースプロキシサーバーはロサンゼルスのオリジンサーバーと通信する必要があります。その後、そのサイトを閲覧するパリのユーザーは、パリのリバースプロキシサーバーからローカルにキャッシュされたバージョンを取得することになり、その結果、パフォーマンスが格段に向上する。

#### SSL 暗号化

各クライアントの SSL（または TLS）通信の暗号化と復号化は、オリジンサーバーにとって計算コストがかかる場合があります。リバースプロキシはすべての受信リクエストを復号化し、すべての送信レスポンスを暗号化するように設定することができ、オリジンサーバーの貴重なリソースを解放する。

## References

- [What is a reverse proxy? | Proxy servers explained](https://www.cloudflare.com/learning/cdn/glossary/reverse-proxy/)
