# モジュラーモノリス / Modular Monolith

[ReadLater]

モジュラーモノリス（Modular Monolith）とは、ソフトウェアアーキテクチャの一種で、システムをモジュール化された単一のアプリケーションとして構築するアプローチを指す。これは、伝統的な`モノリシックアーキテクチャ`と`マイクロサービスアーキテクチャ`の中間に位置すると考えられる。

モジュラーモノリスは、システムの複雑性とスケールの要求に対処するためのバランスの取れたアプローチとして、現代のソフトウェア設計において有力な選択肢となっている。部署がモジュラリティを維持しつつ、シンプルなデプロイメントと運用のメリットを享受し、必要に応じて段階的にマイクロサービスへ移行することも可能。

![modular monolith](https://github.com/hiromaily/documents/raw/main/images/modular_monolith.png "modular monolith")

![modular monolith comparison](https://github.com/hiromaily/documents/raw/main/images/modular_monolith_vs_microservices.png "modular monolith comparison")

## モジュラーモノリスの特徴

1. **モジュール化**:
   システム全体を小さな独立した単位（モジュール）に分割する。各モジュールは特定の機能領域に特化し、内部では独自のロジックを持つ。

2. **単一のデプロイユニット**:
   全てのモジュールが一つのアプリケーションとしてデプロイされる。モジュール間の通信は通常同一プロセス内で行われる。

3. **内部結合の低減**:
   明確な境界を持つモジュール間でのインターフェースやコントラクトを定義し、それにより依存関係を管理する。

4. **リファクタリングの容易さ**:
   全てのモジュールが同一のコードベース内にあるため、モジュール間の依存関係の変更や、リファクタリングが比較的容易。

## モジュラーモノリスの利点

1. **シンプルなデプロイ**:
   単一のデプロイメントユニットなので、デプロイの複雑性が低く、運用が比較的容易。

2. **開発のスピードと協調性**:
   開発者は同じコードベースで作業できるため、コラボレーションが容易。また、新しい機能追加やバグ修正が迅速に行える。

3. **効率的なリソース使用**:
   同一プロセス内でモジュールが動作するため、サービス間の通信オーバーヘッドが少なく、リソース使用が効率的。

4. **移行の容易さ**:
   既存のモノリシックアーキテクチャから段階的にモジュラーモノリスに移行し、その後さらに必要に応じてマイクロサービスに分割する道筋を取りやすい。

## モジュラーモノリスの課題

1. **スケーラビリティの限界**:
   単一のデプロイユニットとして動作するため、特定の機能だけをスケールさせることが難しい場合がある。

2. **ビルドとデプロイの時間**:
   アプリケーションが大規模になると、ビルドとデプロイに時間がかかる可能性がある。

3. **モジュール間の独立性の維持**:
   モジュール間の依存関係を適切に管理し、各モジュールが独立性を保つための設計と規律が必要。

## モジュラーモノリスとマイクロサービスの比較

- **デプロイメント**:
  - モジュラーモノリス: 単一のデプロイユニット。
  - マイクロサービス: 各サービスが独立してデプロイ可能。

- **スケーラビリティ**:
  - モジュラーモノリス: 全体を一緒にスケール。
  - マイクロサービス: 必要な部分だけを独立してスケール。

- **通信方式**:
  - モジュラーモノリス: モジュール間の通信は主にプロセス内。
  - マイクロサービス: サービス間の通信はネットワーク越し（HTTP、gRPCなど）。

## 実装例

1. **ドメイン駆動設計 (DDD)**:
   ドメイン駆動設計はモジュラーモノリスの設計において非常に役立つアプローチで、ドメインの論理的な境界（バウンデッドコンテキスト）を明確にする。

2. **モジュール管理フレームワーク**:
   依存関係注入（DI）フレームワーク、モジュールの管理をサポートするシステムを使用する。

## References

- [What Is a Modular Monolith?](https://www.milanjovanovic.tech/blog/what-is-a-modular-monolith)
