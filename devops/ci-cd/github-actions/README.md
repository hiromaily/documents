# Github Actions

GitHub Actions は、GitHub が提供する CI/CD ツールで、リポジトリ内でワークフローを自動化するための強力なプラットフォーム。

GitHub リポジトリと深く統合された強力な CI/CD ツール。設定が簡単で使いやすく、豊富なアクションライブラリやシークレット管理、並列実行などの機能により、さまざまなワークフローを効率的に自動化できる。ただし、`特定のセットアップ`や`大規模プロジェクト`においては、`制限や依存を考慮する必要がある`。

## GitHub Actions の主な特徴

1. **シームレスな GitHub 統合**

   - GitHub Actions は GitHub リポジトリと直接統合されており、コードの変更やプルリクエスト、プッシュイベントに基づいて自動化ワークフローをトリガーすることができる。

2. **YAML ベースの設定**

   - ワークフローは YAML ファイル（`.github/workflows/` ディレクトリに配置）で定義される。このファイルを通じ、通過するジョブや各ジョブのステップを明確に記述する。

3. **豊富なアクションライブラリ**

   - アクションとは、ワークフロー内で実行される個々のタスクのこと。GitHub Actions には、公式やコミュニティによる豊富なアクションライブラリがあり、再利用可能なアクションを簡単に組み合わせて使うことができる。

4. **コンポジットアクション**:

   - 再利用性を向上するために、複数のステップを 1 つのアクションとしてまとめることができる。

5. **並列実行とマトリックスビルド**

   - ワークフローのジョブを並列に実行したり、異なる環境や設定でのテストをマトリックス構成で実行できる。

6. **多言語対応**

   - GitHub Actions は、JavaScript、Python、Java、Go、Ruby など、多くのプログラミング言語をサポートしている。Docker コンテナを利用することで、事実上どんな言語でも対応可能だ。

7. **マルチプラットフォーム**:

   - Ubuntu、Windows、macOS などの異なる OS 上でジョブを実行可能。

8. **自動化パイプライン**

   - ビルド、テスト、デプロイメントなどのパイプラインを自動化することで、手作業を減らし、信頼性と効率を向上させる。

9. **シークレット管理**

   - 環境変数やセキュアな情報（トークンやキーなど）を安全に管理し、ワークフロー内で利用することができる。

10. **キャッシング**:

    - 過去の依存関係をキャッシュすることで、ビルド時間の短縮が可能。

11. **セルフホストランナー**:

- 自らのインフラでランナーをホストして、特定の要求に応じたカスタム環境を設定できる。

## 基本コンポーネント

1. **Workflow（ワークフロー）**:

   - リポジトリの特定のイベントに応答して実行される自動化プロセスです。ワークフローは、YAML 形式で記述され、`.github/workflows` ディレクトリ内に配置されます。

2. **Event（イベント）**:

   - ワークフローをトリガーする GitHub のアクションです。例として、プッシュ、プルリクエスト、Issues の作成、スケジュールされた時間などがあります。

3. **Job（ジョブ）**:

   - ワークフロー内で実行される一連のステップを含む単位です。各ジョブは、独立した実行環境（ランナー）で並列または順次に実行されることができます。

4. **Step（ステップ）**:

   - ジョブ内で実行される各コマンドやアクションの単位です。シェルコマンドの直接実行や、あらかじめ定義されたアクションの利用が可能です。

5. **Runner（ランナー）**:
   - ジョブが実行される環境です。GitHub がホストするランナー（Ubuntu, Windows, macOS など）や、自分自身でホストするカスタムランナーを使用できます。

## GitHub Actions の典型的なワークフロー例

以下に、シンプルな Node.js プロジェクトのワークフローの例を示す。このワークフローはコードのプッシュ時に実行され、テストを実行する。

```yaml
name: CI

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Check out the code
        uses: actions/checkout@v2

      - name: Set up Node.js
        uses: actions/setup-node@v2
        with:
          node-version: "20"

      - name: Install dependencies
        run: npm install

      - name: Run tests
        run: npm test
```

## GitHub Actions の利点

1. **簡単な設定**

   - GitHub リポジトリとの直接統合と YAML ベースのワークフロー設定により、セットアップが容易。

2. **エコシステムとの統合**

   - GitHub Pages、GitHub Packages、その他多くの GitHub サービスおよびサードパーティサービスとのシームレスな統合が可能。

3. **コスト効率**

   - 各リポジトリには、一定量の無料実行時間が提供されており、小規模プロジェクトやオープンソースプロジェクトにとって非常にコスト効率が良い。

4. **スケーラビリティ**

   - 並列実行やマトリックス構成により、スケーラブルなビルド・テスト環境が構築できる。

5. **コミュニティとサポート**
   - 活発なコミュニティから提供される多くのプリセットアクションが利用可能であり、豊富なドキュメントも揃っている。

## 考慮すべき点

1. **学習曲線**

   - YAML ファイルの書き方や GitHub Actions 独自の構文を理解するための学習が必要。

2. **制限**

   - 無料プランでのリソース制限があり、大規模プロジェクトには追加の計画を考慮する必要がある。

3. **依存**
   - GitHub のエコシステムに強く依存するため、他のバージョン管理システム（例：GitLab、Bitbucket など）を使っている場合には適用が難しい。
