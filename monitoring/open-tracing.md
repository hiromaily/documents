# Open Tracing / OpenTelemetry

OpenTracing は、ベンダーに依存しない分散トレースのオープン スタンダードであり、インストルメンテーション用の一貫した API と、分散システム内のコンポーネント間でコンテキスト情報を表現および伝達するための標準化された方法を提供する

`OpenTracing は現在非推奨`のため[Open Telemetry](./open-telemetry.md)を参照

## OpenTracing のアプローチ

- 計測ライブラリ
  - OpenTracing は、Java、Python、Node.js、Ruby、Go などの一般的なプログラミング言語およびフレームワーク用の計測ライブラリをいくつか提供している
- サービス メッシュの統合
  - サービス メッシュは、トラフィック管理、サービス検出、セキュリティ、可観測性などの一連の機能をマイクロサービス ベースのアプリケーションに提供するインフラストラクチャ レイヤー
  - `Istio`、`Linkerd`、`Consul` などの多くのサービス メッシュ実装は、OpenTracing API を使用した分散トレースの組み込みサポートを提供する
- 手動計測
  - 計測ライブラリまたはサービス メッシュ統合が利用できない場合、開発者は OpenTracing API を使用してコードを手動で計測できる
  - これには、システム内の各コンポーネントにトレース コードを追加する必要があり、時間がかかり、エラーが発生しやすくなりますが、トレース プロセスをよりきめ細かく制御できる
- OpenTracing 互換ツール
  - OpenTracing には、分散トレーシング バックエンド、ログ アグリゲーター、パフォーマンス監視ソリューションなど、OpenTracing API と互換性のあるツールと統合の大規模なエコシステムがある
  - これらのツールを使用すると、開発者はアプリケーションから収集したトレース データを視覚化および分析できるため、パフォーマンスのボトルネックやその他の問題を特定するのに役立つ

## OpenTracing 互換 log アグリゲーター

### Jaeger

- Jaeger は、マイクロサービス ベースのアプリケーションにエンド ツー エンドのトランザクション監視を提供する、人気のあるオープン ソースの分散トレース システム
- Jaeger は OpenTracing をネイティブでサポートしているため、開発者はアプリケーションからトレース データを取得して分析できる
- Jaeger は、Elasticsearch、Cassandra、Kafka など、複数のストレージ バックエンドをサポートしている

### Elastic Stack

- 以前は ELK スタックと呼ばれていた Elastic Stack は、ログ データのリアルタイム検索、分析、および視覚化機能を提供する、人気のあるオープン ソース ログ管理プラットフォーム
- Elastic Stack には、分散システムからトレース データを収集して関連付ける `APM (アプリケーション パフォーマンス モニタリング)`モジュールによる OpenTracing のサポートが組み込まれている

### Grafana Loki

- Grafana Loki は、Prometheus に触発された、水平方向にスケーラブルなマルチテナント ログ集約システム
- Loki を使用すると、開発者は Kubernetes や Docker コンテナーなど、さまざまなソースからログ データを保存、インデックス作成、検索できる
- Loki は、トレース機能を通じて OpenTracing をサポートしています。これにより、開発者はリクエストをトレースし、Loki ダッシュボードでトレースを視覚化できます。

### Zipkin

- Zipkin は、マイクロサービス ベースのアプリケーションにエンド ツー エンドのトレースとレイテンシ分析を提供する、もう 1 つの人気のあるオープンソースの分散トレース システム
- Zipkin は、開発者がさまざまなプログラミング言語とフレームワークを使用してアプリケーションにトレースを追加できるようにする Zipkin Instrumentation ライブラリを通じて OpenTracing をサポートしている
- Zipkin は、トレース データを視覚化および分析するための Web ベースの UI も提供する

### Splunk

- Splunk は、組織が大量のマシン生成データを収集、インデックス付け、および分析できるようにする、広く使用されているログ集約および分析プラットフォーム
- Splunk には、Splunk Observability Suite による OpenTracing の組み込みサポートがあり、マイクロサービス ベースのアーキテクチャに分散トレースおよび監視機能を提供する

### References

[Open Tracing](https://opentracing.io/)
[Go](https://github.com/opentracing/opentracing-go)
