# tRPC

tRPC `TypeScript Remote Procedure Call` は、API レイヤーの型を手動で定義する必要なく、クライアントとサーバー間で型安全な API を可能にするように設計されたフレームワーク。
TypeScript ベースのアプリケーションを開発しており、スキーマやコード生成を扱うことなく、クライアントとサーバー間の型安全性を維持したい場合に最適。

- [Official](https://trpc.io/)

## tRPC の仕組み

### 1.型安全な API の作成

- tRPC を使用すると、TypeScript を使用してサーバー上で API ルートを定義することができる
- これらのルートの型は TypeScript コンパイラによって自動的に推論され、サーバーとクライアントの両方で一貫した型が確保される
- サーバー上でエンドポイントを定義すると、tRPC が入力と出力の型を推論し、これらの型がクライアントで利用可能になる

### 2.クライアントとサーバー間の通信

- クライアント側では、これらのルートをコードベース内の関数であるかのように呼び出すことができる
- 型がクライアントとサーバー間で共有されるため、TypeScript コンパイラは開発中に潜在的な問題を検出することができる

### 3.ゼロ・ボイラープレート

- スキーマを定義し(多くの場合、YAML または JSON を使用)、クライアントおよびサーバーコードを生成する OpenAPI とは異なり、tRPC は TypeScript コードと直接連携する
- コード生成は不要なので、開発プロセスがよりシンプルになる

## tRPC による共通データ定義

### 型共有

- tRPC は、TypeScript ベースのプロジェクトにおいて、クライアントとサーバー間の共通データ型を定義するのに最適
- ただし、OpenAPI や GraphQL のような仕様やスキーマ言語ではない
- 代わりに、TypeScript のコードベースと緊密に統合されており、TypeScript のエコシステムで作業している
- シームレスで型安全な API 体験を求めている場合には、tRPC は良い選択肢となる

### OpenAPI の代替

- スキーマの生成、ドキュメント、複数の言語にわたるサポートを提供するものであれば、OpenAPI の方が適しているかもしれない
- tRPC は TypeScript に焦点を当てており、OpenAPI のような言語に依存しない仕様は提供していない

## Client Setup

- ブラウザからサーバーサイドのプロシージャを通常の関数であるかのように直接呼び出すことができる
- クライアントは、`HTTP`(またはリアルタイム機能の場合は WebSocket)を介してサーバーと通信し、tRPC サーバーにリクエストを送信し、応答を受信する

## API レイヤーや REST エンドポイントは不要

- エンドポイントを定義し、HTTP リクエストを手動で処理する従来の REST API とは異なり、tRPC はこれらの処理を自動化する
- クライアントコードから直接プロシージャを呼び出すだけで、tRPC がその基盤となる HTTP 通信を処理する

## フレームワークとの統合

- tRPC は、React や Next.js などの一般的なフロントエンドフレームワークと簡単に統合できる
- 例えば、Next.js を使用すると、tRPC API ルートを設定でき、クライアント側では、これらのルートを React コンポーネント内で直接使用できる

## tRPC から Document を生成する

- [openapi-trpc](https://github.com/dtinth/openapi-trpc)
