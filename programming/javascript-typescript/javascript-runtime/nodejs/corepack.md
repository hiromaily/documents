# corepack

[github](https://github.com/nodejs/corepack)

Corepack は`Node.jsにおけるパッケージマネージャーの管理ツール`。Node.js v16.10.0 から実験的機能として導入された。Corepack の主な目的は、`異なるパッケージマネージャーを簡単にインストール・使用できるようにすること`。

現在、Corepack は`npm`、`Yarn`、`pnpm`の 3 つのパッケージマネージャーをサポートしている。これにより、プロジェクトごとに異なるバージョンのパッケージマネージャーを使用したい場合や、チームメンバーが同じバージョンのパッケージマネージャーを使うことを保証したい場合に便利。

Corepack を使うことで、プロジェクトごとの環境構築やバージョン管理が一貫性を持って行えるようになる。特に大規模なプロジェクトやチームでの開発環境を統一する際に強力なツールとなる。

## 機能と使い方

### インストールと有効化

Corepack は、Node.js をインストールする際にデフォルトでインストールされる。しかし、最初から有効になっているわけではないので手動で有効化する必要がある。以下のコマンドで有効化できる。

```sh
corepack enable
```

### パッケージマネージャーのインストールと使用

Corepack を使えば、特定のバージョンのパッケージマネージャーをインストールして使用することができる。たとえば、特定のバージョンの Yarn をインストールするには以下のコマンドを使う。

```sh
corepack prepare yarn@<version> --activate
```

`<version>`の部分には、使いたい Yarn のバージョンを指定する。

### バージョンの固定

パッケージマネージャーのバージョンを固定することで、プロジェクト全体やチーム全員が同じバージョンを使用することを担保できる。これは、パッケージマネージャーのバージョンによる環境の違いを吸収し、予期しないエラーを防ぐために非常に便利だ。

### 設定ファイル

Corepack は、プロジェクトごとに異なる設定をするための設定ファイル（`package.json`）をサポートしている。たとえば、`package.json`に以下のように記述することで、特定のバージョンを指定できる。

```json
{
  "packageManager": "yarn@1.22.10"
}
```

この設定を行うことで、そのプロジェクトフォルダ内では指定されたバージョンのパッケージマネージャーが自動的に使われるようになる。
