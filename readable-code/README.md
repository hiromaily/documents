# リーダブルコード ~より良いコードを書くためのシンプルで実践的なテクニック~

- 「読みやすい」コードを書くのに「面白い」ことをする必要はない
  - いい名前をつける
  - 適切なコメントを書く
  - 意味のある単位に分割する
  - キレイに整形する
- 「読みやすい」コードを書くは、「理解しやすい」コードを書くことであり、その結果として「優れた」コードにつながる
- 優れたコードは見た瞬間に何をしているかが伝わってくる
- コードは理解しやすくなければいけない

## 1 章 理解しやすいコード

- コードは理解しやすくなければいけない
- コードは他の人が最短時間で理解できるように書かなければいけない
- コードは短いほうがいいが、「理解するまでにかかる時間」を短くするほうが大切

## 1 部 表面上の改善

- コードに適切な名前をつければ、優れたコメントを書けば、空白の使い方をキレイにすれば、コードはもっと読みやすくなる

## 2 章 名前に情報を詰め込む

- 名前は短いコメントだと思えばいい
- 明確な単語を選ぶ
  - send, deliver, dispatch, announce, distribute, route
  - find, search, extract, locate, recover
  - start, launch, create, begin, open
  - make, create, set up, build, generate, compose, add, new
- 汎用的な名前を避ける
  - tmp や retval などの汎用的な名前を避ける
  - 変数の値を表すような名前を使う
- 抽象的な名前よりも具体的な名前を使う
- 接尾辞や接頭辞を使って情報を追加する
  - 変数の意味を間違えてしまったときにバグになりそうなところにだけ使うことが大切
  - ハンガリアン記法: すべての変数名の接頭辞に「型」をつける
- 名前の長さを決める
  - スコープが小さければ短い名前でもいい
  - プロジェクト固有の省略形はダメ。新しいメンバーが理解できないようではダメ。
  - 不要な単語は省く ConvertToString => ToString
- 名前のフォーマットで情報を伝える

## 3 章 誤解されない名前

- 名前が「他の意味と間違えられることはないだろうか？」と何度も自問自答する
- filter()はわかりにくい。「選択する」なら`select()`、「除外する」なら`exclude()`
- 限界値を含めるときは`min`と`max`を使う
- 範囲を指定するときは`first`と`last`を使う
- 包含/排他的範囲には`begin`と`end`を使う。`end`は最後を含めない。
- ブール値の変数名には、頭に`is, has, can, should`などをつけてわかりやすくすることが多い
- 名前を否定形にするのは避けたほうがいい

## 4 章 美しさ

- 3 つの原則
  - 読み手が慣れているパターンと一貫性のあるレイアウトを使う
  - 似ているコードは似ているように見せる
  - 関連するコードをまとめてブロックにする
- 見た目が美しいコードのほうが使いやすいのは明らか
- コードを段落に分割する
- 一貫性のあるスタイルは「正しい」スタイルよりも大切

## 5 章 コメントすべきことを知る

- コメントの目的は、書き手の意図を読み手に知らせること
- コードからすぐにわかることをコメントに書かない
- ひどい名前はコメントをつけずに名前を変える
- 通常は補助的なコメントが必要になることはない。
  - 優れたコード > ひどいコード + 優れたコメント
- コメントにはコードに対する大切な考えを記録しなければいけない
- コードの欠陥にコメントをつける
  - TODO: あとで手を付ける
  - FIXME: 既知の不具合があるコード
  - HACK: あまりキレイじゃない解決策
- 定数にコメントをつける
  - 定数を定義するときには、その定数が何をするのか、なぜその値を持っているのかという「背景」が存在する
- 読み手の立場になって考える
  - 質問されそうなことを想像する
  - はまりそうな罠を告知する
  - 全体像のコメント
  - 要約コメント

## 6 章 コメントは正確で簡潔に

- コメントは領域に対する情報の比率が高くなければいけない
- コメントを簡潔にしておく
- あいまいな代名詞を避ける
- 関数の動作を正確に記述する
- コードの意図を書く

## 2 部 ループとロジックの単純化

## 7 章 制御フローを読みやすくする

- 条件やループなどの制御フローはできるだけ「自然」にする。コードの読み手が立ち止まったり読み返したりしないように書く
- 条件式の引数の並び順
  - `if (length >= 10)`のほうが`if (10 <= length)`より見やすい
  - 左側：調査対象の式で変化する。右側：比較対象の式で、あまり変化しない
- if/else ブロックの並び順
  - 条件は否定形よりも肯定形を使う。`if (!debug)`より`if (debug)`を使う
  - 単純な条件を先に書く
  - 関心を引く条件や目立つ条件を先に書く
  - これらは、状況によっては何基準は変わってくる
