# Architecture Decision Records (ADR)

Architecture Decision Records（ADR）は、ソフトウェアシステムのアーキテクチャに関する重要な決定を記録するための文書。ADRは、特定の技術的選択とその理由、背景、影響を詳細に記述することで、将来的な理解とメンテナンスを支援する。
ADRを適切に管理することで、技術的な意思決定の透明性が向上し、一貫したシステム設計が可能になる。

## ADRの目的

1. **知識の共有:** チーム内外で、なぜ特定の技術的選択がなされたのかを共有する。
2. **歴史の記録:** 過去の決定とその文脈を後から振り返ることができるようにする。
3. **一貫性の保持:** 一貫したアーキテクチャの選択を行うための基盤を提供する。
4. **意思決定プロセスの透明性:** 技術的な選択肢とその評価基準を明確にすることで、透明性を確保する。

## ADRの構成

ADRはしばしば次のような構造を持つ一般的なテンプレートに従って書かれる：

1. **タイトル:** 決定の要約を示す短いタイトル。
2. **ステータス:** 提案、採用、拒否、破棄などのステータス。
3. **コンテキスト:** 決定を導いた背景や前提条件、問題点。
4. **決定:** 実際の選択と、その選択がどのように行われたか。
5. **理由:** 決定の根拠や正当化。
6. **結果:** 決定の結果として生じる影響。
7. **代替案:** 検討された他の選択肢とその理由。
8. **関連文書:** 参考文献や関連する他のADR。

## ADRの例

### タイトル: データベースの選択

- **ステータス:** 採用
- **コンテキスト:** 我々の新しいプロジェクトでは、高い書き込み性能とスケーラビリティが必要である。
- **決定:** 我々はPostgreSQLをデータベースとして選択する。
- **理由:** PostgreSQLは高い書き込み性能を持ち、スケーラビリティにも優れている。また、既存のエコシステムやツールとの統合が容易である。
- **結果:** PostgreSQLを使用することで、高い書き込み性能を達成し、将来的なスケーラビリティの向上が見込める。
- **代替案:** MySQLも検討したが、書き込みパフォーマンスが要件に対して不十分であった。
- **関連文書:** プロジェクトの技術要件文書、データベース評価の比較資料

## ADRを書く際のポイント

1. **明確で簡潔に書く:** 複雑な技術的内容でも、誰が読んでも理解できるよう簡潔に書く。
2. **頻繁に更新:** 新しい情報や変化があれば、ADRを更新する。
3. **バージョン管理:** バージョン管理システムを利用して、変更履歴を追跡する。

## [ソフトウェアアーキテクトのための意思決定術](https://book.impress.co.jp/books/1123101159)

不確実性を管理しながら、相反するさまざまな要素を考慮しながら、ソフトウェアアーキテクチャの意思決定を続けていくためのヒントとなる内容らしい。

[Slide](https://speakerdeck.com/snoozer05/software-architecture-and-decision-making)

- ソフトウェアアーキテクチャの失敗の多くは、知識不足ではなく判断力不足で起きている
  - 判断力不足とは
    - 判断の材料となる前提や制約を十分にとらえきれていない
    - 判断の際に考慮すべき観点を十分に網羅できていない
    - そもそも「判断」をしていない
      - 流行に流されている／現実を見ずに知識だけの判断になっている／組織の要請に考えなしに従っている
- ソフトウェアアーキテクチャの意思決定はなぜ難しいか
  - ① ソフトウェアアーキテクチャはさまざまなものに影響を受ける・与える
    - 要素
      - チーム組織
      - 今日の技術トレンド
      - アーキテクトの能力、スキル、知識
      - ビジネス目標
      - 制約
      - 影響力のある機能要求 -> 品質特性
    - そのため、すべての決定は、多くの相反する要素を考慮しなければならない
      - ビジネス、技術、組織の全ての重なる中間にあるのがソフトウェアアーキテクチャ
  - ② ソフトウェアシステムの開発には不確実性が存在する
    - 目標の不確実性（本当に作りたいものは何か）
    - 方法の不確実性（どうやって作ればいいのか）
    - 未知の未知もある。これは我々が知らないということさえ知らないことだ。

## References

- [アーキテクチャ設計の民主化とADR(Architectural Decision Records)による意思決定の未来 - Facilitating Software Architecture の読書感想文](https://syu-m-5151.hatenablog.com/entry/2024/12/31/232546)
