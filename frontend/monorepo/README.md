# Monorepo

ひとつの Git リポジトリで複数の NPM パッケージを扱う形態。シングルレポの開発ツールの統一的管理の良さと、マルチレポの再利用可能なモジュールを切り出してリリースする点の両方を兼ね備える。

## ルートパッケージ(root package)

モノレポにおけるトップレベルの NPM パッケージ。通常は、リポジトリのトップレベル。このパッケージはワークスペースを管理するパッケージ。NPM では配布しない。ルートパッケージには、開発ツールの統一的設定や、CI 設定が置かれ、テストフレームワークなどの開発ツールがインストールされる。

## ワークスペース (workspaces)

モノレポにおける NPM で配布するパッケージ。通常、`/packages` ディレクトリにワークスペースごとのディレクトリを作る。
単に`パッケージ`と言った場合は、ワークスペースを指すことがある。モノレポには複数のワークスペースが存在しうる。

## モノレポ ツール

### [Turborepo](https://turbo.build/repo)

- キャッシュを利用し、差分がある箇所のみのビルドを行うためビルド時間が高速
- 管理しているパッケージ間の依存関係を考慮した順でビルドが可能
- 複数のタスクを並列で実行することが可能
- 依存関係のグラフを可視化可能

### [WIP: Nx](https://nx.dev/)

## References

- [npm workspaces とモノレポ探検記](https://zenn.dev/suin/scraps/20896e54419069)
- [Turborepo を使ってモノレポ構成の npm パッケージ を管理する](https://cam-inc.co.jp/p/techblog/728530570199434396)
- [モノレポによるマイクロサービスの開発運用](https://note.com/tinkermodejapan/n/nb14009fe837f)