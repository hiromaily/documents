# Copilot Edits

Copilot Editsを使用して、AI駆動のコード編集セッションを開始し、自然言語を使用して`複数のファイルにわたるコード変更`を迅速に反復できる。Copilot Editsは、エディタ内で直接編集を適用し、周囲のコードの完全なコンテキストでレビューできる。

## 編集モードとエージェント モード (プレビュー)

Copilot Editsは2つのモードで機能する

- **編集モード**: 編集するファイルを選択し、関連するコンテキストとプロンプトを提供すると、Copilotがコード編集を提案する。
- **エージェントモード（プレビュー）**: Copilotが自律的にタスクと関連ファイルを計画し、リクエストを実装するために必要なコード編集とターミナルコマンドを提案する。問題が発生した場合は、継続的に反復して解決する。

> **重要**: ノートブックを使用している場合、Copilot Editsのサポートは現在制限されている。VS Codeでノートブックを使用する場合は、Copilot ChatまたはInline Chatを使用することをお勧めする。

## 編集モードの使用

編集モードでは、編集するファイルを選択し、関連するコンテキストとプロンプトを提供する。Copilotはプロンプトに基づいてコード編集を提案する。

1. Copilot Editsビューを開く（⇧⌘I）。
   - VS CodeのタイトルバーのCopilotメニューから「Open Copilot Edits」を選択。
   - または、View > Appearance > Secondary Side Barを選択して、Secondary Side Barを開き、Copilot Editsビューを選択。

2. モードのドロップダウンから「Edit」を選択します。

3. Add Filesを使用して、Copilotへのプロンプトの関連コンテキストを示す。
   - ファイル、フォルダー、またはエディタタブをCopilot Editsビューにドラッグ＆ドロップして追加できる。

4. プロンプトを入力してコード編集をリクエストする。具体的かつ正確に変更内容を伝え、大きなタスクを小さなタスクに分解する。

5. 提案された編集をレビューし、受け入れるか破棄する。

6. コード変更を反復する。

## エージェントモードの使用（プレビュー）

エージェントモードでは、Copilot Editsがより自律的かつ動的に動作し、望ましい結果を達成する。エージェントモードは、関連するコンテキストを自動的に決定し、コード変更とターミナルコマンドを提供する。

1. VS Code Insidersでプロジェクトを開く (2023/03現在、通常のVS Codeも実装されている)。
2. Copilot Editsビューを開く（⇧⌘I）。
3. モードのドロップダウンから「Agent」を選択。
4. プロンプトを入力してコード編集をリクエストする。
5. 提案されたコード編集をレビューし、Copilotが提案したターミナルコマンドを実行するか確認する。
6. Copilot Editsは、コード編集やターミナルコマンドの問題を検出し、解決するために追加のアクションを実行する。
7. フォローアップの質問を続け、Copilot Editsが提供するコード変更を反復する。

## 編集の受け入れまたは破棄

Copilot Editsは、AIが生成した各編集を受け入れるか拒否するコードレビューの流れを提供する。拒否した場合、変更されたファイルは以前の状態に戻される。

- 変更されたファイルのリストに、編集されたファイルが表示される。
- エディタのオーバーレイコントロールを使用して、提案された編集間を移動できる。

## エージェントモードリクエストの中断

進行中のリクエストを中断するには、リクエストを一時停止またはキャンセルできる。一時停止すると、Copilotはリクエストの処理を停止し、入力を待つ。

## 編集の取り消し

コードに対する編集リクエストを送信しているとき、変更を元に戻したい場合がある。Copilot Editsビューのタイトルバーにある「Undo Last Edit」コントロールを使用して、最後の編集を元に戻すことができる。

## Copilot Editsへのチャットリクエストの送信

Copilot Chatは、プロジェクトや技術トピックについて質問したりアイデアを探求したりするのに最適。チャットセッションをCopilot Editsに移動することで、コード編集に最適化された提案を直接適用できる。

## エージェントモードツール

Copilot Editsは、リクエストを完了するために特定のタスクを実行するためのツールセットを使用する。これらのツールは、特定のタスクを実行するための専門的なユーティリティと考えるとよい。

## 設定

以下は、Copilot Editsに関連する設定のリスト。設定エディタを通じて設定を構成できる。

- `chat.editing.confirmEditRequestRemoval`: 編集を元に戻す前に確認を求める（デフォルト: true）
- `chat.editing.autoAcceptDelay`: 提案された編集が自動的に受け入れられるまでの遅延を構成します（デフォルト: 0）

## キーボードショートカット

以下は、Copilot Editsに関連するデフォルトのキーボードショートカットのリスト。

- `⇧⌘I`: Copilot Editsビューを開く
- `⌘Enter`: すべての編集を受け入れる
- `⌘Backspace`: すべての編集を破棄する

## 制限事項

- 複数の同時編集セッションはまだサポートされていません。
- Jupyterノートブックや他のカスタムテキスト形式、バイナリファイル形式のサポートはない。
- Copilot Editsは、10分あたり7つの編集リクエストに制限されている。

## よくある質問

### Copilot EditsとCopilot Chatの違いは何ですか？

Copilot Editsは、コード編集のコンテキストで動作し、コードベースに変更を加えるためのプロンプトを使用する。一方、Copilot Chatは、一般的な質問をするためのチャットインターフェース。

| 機能                   | Copilot Edits | Chatビュー | Inline Chat |
| ---------------------- | ------------- | ---------- | ----------- |
| 複数ファイルの編集     | ✅             | ✅*         |             |
| コード編集のプレビュー | ✅             |            | ✅           |
| コードレビューの流れ   | ✅             |            |             |
| 変更の巻き戻し         | ✅             |            |             |

* コードブロックはチャット会話に含まれ、手動で適切なファイルに適用する必要がある。

### Copilot Editsをノートブックで使用できますか？

ノートブックを使用している場合、Copilot Editsのサポートは制限されている。VS Codeでノートブックを使用する場合は、Copilot ChatまたはInline Chatを使用することをお勧めする。
