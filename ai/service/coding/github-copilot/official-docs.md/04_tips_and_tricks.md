# [VS CodeにおけるCopilotのヒントとコツ](https://code.visualstudio.com/docs/copilot/copilot-tips-and-tricks)

Visual Studio CodeでGitHub Copilotを使用する際の開発体験を最適化するためのヒントとコツについて。

## Copilotを使用するためのチェックリスト

以下のチェックリストを使用して、Copilotを最大限に活用しましょう：

1. **適切なツールを選択する**: 編集、質問、またはコーディングの流れを維持するために最適化されたツールを使用します。
2. **Copilotをパーソナライズする**: カスタム指示を使用して、自分のスタイルやコーディングプラクティスに合ったコード提案を得ます。
3. **効果的なプロンプトを書く**: 最も関連性の高い応答を得るために、文脈を提供します。
4. **ワークスペースをインデックス化する**: コードベースに関する質問に正確な応答を受け取ります。
5. **AIモデルを選択する**: 高速コーディング用または計画/推論用のモデルを選択します。
6. **プロンプトを再利用する**: タスク特有のプロンプトを保存し、チーム全体で再利用することで時間を節約します。

## 適切なCopilotツールを選択する

タスクに応じて、異なるCopilotツールを選択できます。

| ツール             | 使用ケース                                                                                                                                                          |
| ------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| コード補完         | コーディングをスムーズにし、流れを維持します。エディタ内でコードスニペット、変数名、関数のインライン提案を受け取ります。                                            |
| チャット           | デザインアイデアをブレインストーミングしたり、コード提案を得るための継続的なチャットを行います。特定のコード提案を適用することも可能です。                          |
| 編集               | 自然言語を使用してコーディング編集セッションを開始します。ワークスペース内の複数のファイルに大規模なコード変更を自動的に適用します。                                |
| エージェントモード | 高レベルの要件を実装し、エージェント的なコーディングフローを開始します。Copilotは必要なコード変更やタスクを計画し実行するために複数のツールを自律的に呼び出します。 |

## Copilotをカスタム指示でパーソナライズする

Copilotがコードを生成したり質問に答えたりする際、あなたのコーディングプラクティスや好みに合わせようとしますが、常に十分な文脈を持っているわけではありません。特定のフレームワークバージョンで作業している場合は、プロンプトに追加の文脈を提供する必要があります。

### カスタム指示を有効にする手順

1. ワークスペースのルートに`.github/copilot-instructions.md`ファイルを作成します。
2. Markdown形式で指示をファイルに追加します。例：

   ```markdown
   # Copilotのカスタム指示

   ## プロジェクトの文脈
   このプロジェクトはReactとNode.jsで構築されたWebアプリケーションです。

   ## インデント
   スペースではなくタブを使用します。

   ## コーディングスタイル
   変数名にはcamelCaseを使用し、従来の関数式よりもアロー関数を好みます。

   ## テスト
   単体テストにはJestを、エンドツーエンドテストにはPlaywrightを使用します。
   ```

## プロンプトエンジニアリング

効果的なプロンプトを使用することで、Copilotの応答の質を向上させることができます。よく作成されたプロンプトは、Copilotがあなたの要件をよりよく理解し、より関連性の高いコード提案を生成するのに役立ちます。

- **一般的な内容から具体的な内容へ**:
  - 例: 「Calculatorクラスを生成します。」
  - 例: 「加算、減算、乗算、除算、階乗のメソッドを追加します。」

- **求める内容の例を示す**:
  - 例: 「文字列を受け取り、その中の母音の数を返す関数を生成します。」
  - 例: `findVowels("hello")`は2を返し、`findVowels("sky")`は0を返します。

- **複雑なタスクを単純なタスクに分解する**:
  - 例: 「食事プランナーアプリを生成します。」ではなく、以下のように分解します。
    - 材料のリストを受け取り、レシピのリストを返す関数を生成します。
    - レシピのリストを受け取り、買い物リストを返す関数を生成します。
    - レシピのリストを受け取り、週の食事プランを返す関数を生成します。

- **適切な文脈を提供する**:
  - 例: `#codebase`変数を使用して、全体のコードベースを参照します。
  - 例: 「#codebaseでデータベース接続文字列が使用されている場所はどこですか？」

- **プロンプトを繰り返す**:
  - フォローアッププロンプトを提供して応答を洗練または修正します。

- **チャット履歴を関連性のあるものに保つ**:
  - Copilotは会話の履歴を使用して文脈を提供します。過去の質問や応答が関連性がない場合は削除します。

## 適切な文脈を提供する

関連する文脈をプロンプトに加えることで、Copilotからより正確で関連性の高い応答を得ることができます。

- `#codebase`変数を使用して、Copilotが適切なファイルを自動的に見つけられるようにします。
- プロンプト内でファイルやシンボルを参照するために`#file`や`#sym`チャット変数を使用します。
- ファイル、フォルダ、またはエディタタブをチャットプロンプトにドラッグ＆ドロップします。
- 問題、テストの失敗、またはターミナル出力をチャットプロンプトに追加して、シナリオ特有の文脈を提供します。
- 画像やスクリーンショットをプロンプトに追加して、Copilotに画像を分析させます。

エージェントモードを使用すると、Copilotは自律的に関連するファイルと文脈を見つけます。

## 再利用可能なプロンプト

再利用可能なプロンプトを使用すると、特定のタスクに対するプロンプトをその文脈と指示と共にファイルに保存できます。これにより、そのプロンプトをチャットで添付して再利用できます。ワークスペースにプロンプトを保存すると、チームと共有することも可能です。

### 再利用可能なプロンプトを作成する手順

1. コマンドパレットから「Create Prompt」コマンドを使用してプロンプトファイルを作成します。
   - このコマンドは、ワークスペースのルートにある`.github/prompts`フォルダ内に`.prompt.md`ファイルを作成します。

2. プロンプトと関連する文脈をMarkdown形式で記述します。例：

   ```markdown
   あなたの目標は、新しいReactフォームコンポーネントを生成することです。
   提供されていない場合は、フォーム名とフィールドを尋ねます。
   フォームの要件:
   * フォームデザインシステムコンポーネントを使用する
   * フォーム状態管理には`react-hook-form`を使用する
   * フォームデータのTypeScript型を常に定義する
   * 意味のあるバリデーションルールをカスタマイズする
   ```

3. チャット内で文脈としてプロンプトを追加します。

## AIモデルを選択する

Copilotは異なるAIモデルを選択できます。いくつかのモデルは高速コーディングタスクに最適化されています。
