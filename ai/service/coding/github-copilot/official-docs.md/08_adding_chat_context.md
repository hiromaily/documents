# Copilotチャットプロンプトにコンテキストを追加する方法について

コンテキストを追加することにより、Copilotが最も適切で関連性の高い回答を提供できるようになる。Copilotは、ファイル、シンボル、ターミナルコマンドの出力など、さまざまな種類のコンテキストをサポートしている。

Copilotは、自然言語のチャットプロンプトに基づいて質問の意図と範囲を判断しようとする。最も適切で関連性の高い回答を得るために、チャットプロンプトにコンテキストを追加するか、Copilotに自動的に適切なファイルを見つけさせることができる。

## チャットプロンプトにコンテキストを追加する方法

チャットプロンプトにコンテキストを追加する方法はいくつか存在する

- **VS Codeは、現在アクティブなエディタを自動的にコンテキストとして追加**:
   エディタでコードブロックを選択した場合、その選択のみがコンテキストとして追加される。現在のリクエストに対してアクティブエディタの追加を無効にするには、コンテキスト項目の横にある無効化（目のアイコン）を選択する。`chat.implicitContext.enabled`設定を使用して、すべてのリクエストに対してアクティブエディタを自動的に追加するかどうかを設定できる。

- **Attach Context（クリップアイコン）を選択するか、Add Filesボタンを選択し、Quick Pickからコンテキストの種類を選択する**:
   事前定義されたコンテキストタイプ（例：CodebaseやTerminal Selection）を添付するか、ワークスペースからファイル、フォルダ、シンボルを選択できる。

- **ExplorerまたはSearchビューのファイルで、Copilot > Add File to Chatを選択するか、エディタ内のテキスト選択でAdd Selection to Chatを選択する**

- **チャットプロンプトに`#`記号を入力して、チャット変数を使用してコンテキストを参照する**:
   例えば、`#selection`を使用して現在のエディタ選択をチャットプロンプトに追加したり、`#file`を使用してワークスペースファイルを追加したり、`#sym`を使用してワークスペースからシンボルを追加したりする。

- **エディタタブやExplorerビュー、Searchビュー、エディタのパンくずリストからChatビューにファイルやフォルダをドラッグ＆ドロップする**

> 注意：可能な場合、ファイルを添付するとその全内容が含まれる。内容が大きすぎる場合は、関数とその説明を含むファイルのアウトラインが含まれる。アウトラインも大きすぎる場合は、ファイルはプロンプトに含まれない。

## Copilotに自動的に適切なファイルを見つけさせる

個別のファイルを手動で追加する代わりに、Copilotにコードベースから適切なファイルを自動的に見つけさせることができる。これは、どのファイルが質問に関連しているかわからない場合に便利。

Copilotに自動的に適切なファイルを見つけさせるには、プロンプトに`#codebase`を追加するか、コンテキストタイプのリストからCodebaseを選択する。

最良の結果を得るために、`github.copilot.chat.codesearch.enabled`（プレビュー）設定を有効にする。

## 問題解決のためのコンテキストを追加する

コードに問題が発生したり、テストを実行する際に失敗した場合、Copilotが最適な回答を提供できるように、チャットプロンプトに特定のコンテキストを追加できる。

- **Problemsパネルからアイテムをドラッグ＆ドロップして、対応する問題をコンテキストとしてプロンプトに添付する** 
- **コンテキストタイプのリストから`Problem...`を選択し、Quick Pickから特定の問題を選択する**
- **Terminal Last Commandコンテキストタイプを選択するか、`#terminalLastCommand`を入力して、ターミナルで実行した最後のコマンドの出力を添付する**

## チャットコンテキストの種類

Copilotは以下のコンテキストタイプをサポートしている：

- **ファイル** - ワークスペースから特定のファイルをプロンプトに含める
- **フォルダ** - フォルダを追加して、そのフォルダ内のファイルをプロンプトに含める
- **シンボル** - ワークスペースからシンボルをプロンプトに追加する
- **コードベース** - Copilotに自動的に適切なファイルを見つけさせる
- **エディタまたはターミナルの選択** - エディタまたはターミナルからのテキスト選択をプロンプトに含める
- **ターミナルコマンドの出力** - ターミナルで実行した最後のコマンドの出力を含める
- **問題** - Problemsパネルから特定のコード問題をプロンプトに含める
- **テスト失敗** - テスト失敗の詳細をプロンプトに含める

- **Copilot Chatを使用してCopilotと対話する**
- **Copilot Editsを使用して複数のファイルにわたって編集を行う**
