# Wireshark

Wiresharkは、ネットワークプロトコルアナライザ（ネットワークパケットキャプチャツール）。このツールを使うことで、ネットワーク上のデータパケットを分析・可視化し、ネットワークのトラブルシューティング、セキュリティの監査、プロトコル開発などを行うことができる。

## 主な機能

1. **パケットキャプチャ**: Wiresharkはリアルタイムでネットワークトラフィックをキャプチャ（収集）することができる。ローカルシステムのネットワークインターフェースを利用して、通過するすべてのパケットを記録する。

2. **プロトコル解析**: 捕捉したパケットを詳細に解析し、各プロトコルの構造を明らかにする。サポートするプロトコル数は非常に多く、HTTP、FTP、TCP、UDP、DNSなど、ほとんどの一般的なプロトコルに対応している。

3. **フィルタリング**: 特定の条件に基づいてパケットを表示・フィルタリングする機能がある。キャプチャフィルターとディスプレイフィルターの両方をサポートしている。

4. **GUIとCLI**: Wiresharkはグラフィカルユーザインターフェース（GUI）を提供しているが、`tshark`と呼ばれるコマンドラインインターフェース（CLI）も利用可能。

5. **カラリングルール**: パケットを特定の属性に基づいて色分けして表示することができる。これにより、特定のパケットを簡単に識別できる。

6. **分析ツール**: 情報チャートや統計データも提供されており、ネットワークパフォーマンスの評価やトラブルシューティングに役立つ。

7. **拡張機能**: Luaスクリプトを使ってカスタムディセクタ（プロトコル解析機能）を追加することができる。

## 基本操作

1. **Wiresharkを起動**: インストール後、Wiresharkを起動。
2. **インターフェースの選択**: ネットワークトラフィックをキャプチャするインターフェース（有線LAN、Wi-Fiなど）を選択。
3. **キャプチャの開始**: 選択したインターフェースでキャプチャを開始する。キャプチャを開始すると、リアルタイムでパケット情報が画面に表示される。
4. **パケットの解析**: 任意のパケットをクリックすると、その詳細が表示される。各プロトコルヘッダーやペイロードの内容を確認できる。
5. **フィルタリング**: 例えば「http」や「tcp.port == 80」といったフィルタを適用して、特定のトラフィックだけを表示することができる。
6. **キャプチャの停止と保存**: 必要なデータを取り終えたらキャプチャを停止し、キャプチャファイルを保存することができる（.pcap形式など）。

## 例: HTTPトラフィックのフィルタリング

1. Wiresharkを起動し、適切なインターフェースを選択してキャプチャを開始する。
2. ウェブブラウザでいくつかのウェブページにアクセスする。
3. Wiresharkに戻り、ディスプレイフィルタに「http」と入力してApplyする。
4. これにより、HTTPに関連するパケットのみが表示される。特定のパケットをクリックして詳細を確認できる。

## 使い方

起動してネットワークを選択後、すぐにキャプチャしたいリクエストを実行し、キャプチャを停止させる。  
次に、Filter bar に expression を設定

```txt
http.host contains "jp.indeed.com" && http.request.uri contains "/jobs?q=Rust"
```
