# TEE (Trusted Execution Environment) / 信頼実行環境

**信頼実行環境 (Trusted Execution Environment, TEE)** は、コンピュータシステム内で、通常の実行環境とは物理的または論理的に分離されたセキュアな領域。この環境内で実行されるコードとデータは、外部から保護され、不正アクセスや改ざんが防止される。

信頼実行環境（TEE）は、セキュアなハードウェアに基づいて、通常の実行環境から隔離された領域を提供し、機密性と整合性の保護を確保する。そのため、TEEは幅広いセキュリティ需要に対応する重要な技術であり、特に`Confidential Computing`の実現に不可欠な要素。TEEは、クラウドコンピューティング、IoT、エンタープライズセキュリティ、医療、金融など、多岐にわたる分野で重要な役割を果たしている。

## TEEの主要なコンポーネント

1. **ハードウェアの信頼基盤**:
   - TEE はハードウェアベースで実装されることが多く、基盤となるプロセッサやセキュリティチップなどが含まれる。
   - 例として、ARMのTrustZoneやIntelのSGX（Software Guard Extensions）などがある。

2. **セキュアエンクレーブ**:
   - セキュアエンクレーブ（またはセキュアワールド）は、TEE内の隔離された領域で、機密データやコードが安全に処理される。

3. **通常の実行環境との境界**:
   - 通常の実行環境（ノーマルワールド）とセキュアな環境（セキュアワールド）との間には、しっかりとしたセキュリティの境界がある。

## TEEの機能

1. **データとコードの守秘性**:
   - TEE内部でのデータとコードは、外部の実行環境やアタッカーから保護される。
   - データは暗号化され、アクセスは制限される。

2. **整合性保護**:
   - 実行されるデータとコードの整合性が確保され、不正な改ざんから保護される。

3. **認証とアテステーション**:
   - TEEは、実行環境が信頼できることを証明するアテステーション機能を提供する。
   - 外部のエンティティは、この証明を通じて、TEEが正しく実行されていることを検証できる。

4. **分離**:
   - TEE内のセキュアエンクレーブは、通常の実行環境と完全に隔離されている。
   - 隔離によって、機密データや処理が保護される。

## TEEの実装例

1. **ARM TrustZone**:
   - ARMプロセッサに実装されたセキュリティ機能で、セキュアワールドとノーマルワールドに分かれている。
   - セキュアワールド内でのコード実行やデータ処理が保護される。

2. **Intel SGX (Software Guard Extensions)**:
   - Intelのプロセッサ技術で、セキュアエンクレーブ内での信頼されたコードの実行が可能。
   - エンクレーブ内のデータはハードウェア的に隔離され、保護される。

3. **AMD SEV (Secure Encrypted Virtualization)**:
   - AMDの仮想化技術で、仮想マシン内でのメモリ保護を提供する。
   - メモリの暗号化によって、ホストOSと仮想マシン間のセキュアな境界を確立する。

## TEEの用途

1. **セキュアなアプリケーション実行**:
   - 金融取引、医療データ処理、機密情報の管理など、セキュリティが重要なアプリケーションの実行。

2. **デジタルコンテンツ保護**:
   - デジタル著作権管理（DRM）、ストリーミングサービスなど、コンテンツの保護。

3. **セキュアなエンタープライズソリューション**:
   - 企業内の機密データ保護、セキュアな通信、リモートワークのセキュリティ対策。

## References

- [内部Docs: Intel SGX](./intel-sgx/README.md)
- [Arm TrustZone](https://www.arm.com/ja/technologies/trustzone-for-cortex-a)
- [AMD SEV (Secure Encrypted Virtualization)](https://www.amd.com/en/developer/sev.html)
- [Keystone Envlave](https://riscv.org/wp-content/uploads/2018/12/Keystone-Enclave-An-Open-Source-Secure-Enclave-for-RISC-V.pdf)
- [TEE とは？ by プライバシーテック研究所](https://acompany.tech/privacytechlab/trusted-execution-environment/)
