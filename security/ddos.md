# DDoS (Denial of Service attack)

対策方法は以下の通り

- DDoS 軽減技術の実装
  - Rate Limiting
  - IP ブロッキング
  - トラフィック フィルタリング
- CDN を利用する
  - CDN を使用すると、トラフィックを複数のサーバーに分散し、DDoS 攻撃の影響を軽減できます。
- トラフィック パターンを監視する
  - トラフィック パターンを監視し、トラフィックの異常なスパイクを検知する。 これにより、潜在的な DDoS 攻撃を特定し、被害が発生する前に対策を講じることができる
- システムをテストする
  - システムの脆弱性と潜在的な弱点を定期的にテストする。これにより、潜在的な攻撃領域を特定し、それらを軽減するための措置を講じることができる
- DDoS 対応計画を立てる
  - DDoS 攻撃への対応方法について計画を立てる。これには、利害関係者に通知する方法、攻撃を軽減するために実行する手順、攻撃が停止した後にサービスを復元する方法が含まれる。
- サードパーティの DDoS 保護サービスの使用を検討する
  - システムを DDoS 攻撃から保護するのに役立つサードパーティの DDoS 保護サービスが多数提供されている。これらのサービスは、攻撃の軽減に役立つ保護と専門知識の追加レイヤーを提供できる。
- WAF (Web Application Firewall)

## References

- [Google Cloud: Rate Limiting](https://cloud.google.com/service-infrastructure/docs/rate-limiting?hl=ja)

## DDoS 軽減技術の実装

1 つの手法だけで絶対確実というわけではなく、多くの場合、複数の手法を組み合わせて効果的な DDoS 保護を提供する必要がある。さらに、DDoS 攻撃は常に進化しているため、最新の緩和技術を常に把握し、それに応じて防御を適応させることが重要。

- Rate Limiting
  - レート制限には、一定期間内にシステムに対して行うことができる要求または接続の数のしきい値の設定が含まれます。 これにより、システムに送信できるトラフィックの量が制限されるため、DDoS 攻撃を防ぐことができる。
- IP ブロッキング
  - IP ブロッキングには、DDoS 攻撃に関連することが知られている特定の IP アドレスからのトラフィックをブロックすることが含まれます。 これは、手動で行うことも、自動ツールを使用して行うこともできる
- トラフィック フィルタリング (WAF の責務)
  - トラフィック フィルタリングには、特定の種類のペイロードを含むトラフィックや既知のボットネットからのトラフィックなど、悪意があることがわかっているトラフィックを除外することが含まれる。
- クラウドベースの保護
  - クラウドベースの保護では、サードパーティ サービスを使用して DDoS 攻撃に対する保護を提供します。 このサービスは通常、レート制限、IP ブロッキング、トラフィック フィルタリングなどの手法を組み合わせて攻撃を緩和する。
- ロード バランシング
  - ロード バランシングには、複数のサーバー間でのトラフィックの分散が含まれる。 これにより、1 台のサーバーへの影響が軽減され、攻撃者がシステムを圧倒しにくくなるため、DDoS 攻撃を防ぐことができる。
- アプリケーション レベルの保護
  - アプリケーション レベルの保護には、アプリケーション レベルで保護を実装して、ソフトウェアの特定の脆弱性を標的とする攻撃を防止することが含まれる。 これには、入力の検証やアクセス制御などの手段が含まれる場合がある。

## Rate Limiting

Rate Limiting は、特定のユース ケースと要件に応じて、システムのさまざまなレベルで実装できる。  
レート制限は、悪意のあるトラフィックだけでなく正当なトラフィックにも影響を与える可能性があることに注意が必要。そのため、適切なしきい値を設定し、正当なユーザーをブロックしないようにレート制限ルールが適切に構成されていることを確認することが重要。

- Network レベル
  - ネットワーク レベルでは、Rate Limiting をファイアウォールまたはルーターに実装できる。これにより、特定の IP アドレスまたはサブネットから許可される着信接続またはパケットの数を制限できる。
- Web Server レベル
  - Web Server レベルでは、Apache や Nginx などのソフトウェアを使用してレート制限を実装できる。これにより、一定期間内に特定の IP アドレスまたはユーザー エージェントから許可される要求の数を制限できる。
- Application レベル
  - アプリケーション レベルでは、Rate Limiting をアプリケーション コード内に実装できる。 これにより、一定期間内に特定のユーザーまたは IP アドレスから許可される API 呼び出し、データベース クエリ、またはその他の操作の数を制限できる。
- クラウドベースの保護
  - クラウドベースの保護サービスは、レート制限機能も提供できる。 これらのサービスはシステムとインターネットの間に位置し、さまざまな基準に基づいてシステムに到達できるトラフィックの量を制限できる。

## WAF (Web Application Firewall)

WAF は、Web アプリケーションとインターネットの間に位置するファイアウォールの一種で、着信トラフィックを監視およびフィルタリングする。
既知の攻撃パターンに一致するトラフィック、または既知の悪意のある IP アドレスから発信されたトラフィックをブロックするように構成できる。

WAF は DDoS 攻撃に関連する大量のトラフィックを処理するように特別に設計されているわけではないが、既知の攻撃シグネチャに依存する攻撃や Web アプリケーションの特定の脆弱性を標的とする攻撃など、特定の種類の攻撃を効果的にブロックできる。

WAF は、既知の攻撃パターンをブロックするだけでなく、機械学習やその他の高度な技術を使用してトラフィック パターンを分析し、疑わしい動作を特定することで、新たに出現する脅威からの保護にも役立つ。
