# 対称暗号 (共通鍵暗号) / Symmetric-key cryptography

WIP

対称鍵暗号（Symmetric-key Cryptography）は、暗号化と復号に同じ鍵を使用する暗号方式であり、これは現代の暗号技術において最も基本的かつ広く用いられる手法となる。
`対称鍵暗号は、その速さと効率性から多くの用途で非常に有用だが、鍵配送と管理の問題があるため、その解決策として非対称鍵暗号と組み合わせて使われることが一般的`。たとえば、非対称鍵暗号を用いて対称鍵を安全に配送した後、その対称鍵で実際のデータ通信を行うというハイブリッド方式がよく採用されている。これにより、対称鍵暗号の効率性と非対称鍵暗号のセキュリティの両方を享受することができる。

## 基本概念

- **鍵（Key）**: 暗号化と復号に使用される秘密情報。対称鍵暗号では、送信者と受信者が同じ鍵を共有する
- **暗号化（Encryption）**: 平文（Plaintext）を暗号文（Ciphertext）に変換するプロセス
- **復号（Decryption）**: 暗号文を元の平文に戻すプロセス

## 主要な特徴

1. **同一鍵**: 同じ鍵を使用して暗号化と復号を行う。この鍵は送信者と受信者の間で安全に共有されている必要がある。
2. **高速性**: 一般に非対称鍵暗号に比べて計算コストが低く、高速な暗号化と復号が可能。
3. **セキュリティ管理**: 鍵管理が重要であり、鍵が漏洩すると通信全体が危険に晒される

## 例とアルゴリズム

いくつかの代表的な対称鍵暗号アルゴリズム

- **AES (Advanced Encryption Standard)**: 128ビット、192ビット、256ビットの鍵長をサポートし、高いセキュリティと効率を持っている。現在、最も広く使用されている
- **DES (Data Encryption Standard)**: 56ビットの鍵を使う古いアルゴリズム。現在はセキュリティ上の脆弱性から非推奨
- **3DES (Triple DES)**: DESを3回適用することでセキュリティを強化。DESよりも安全ですが、AESほどの効率性やセキュリティはない
- **Blowfish**: 可変長の鍵（32ビットから448ビット）を使用するアルゴリズム。高速であり特許がないため自由に使用できるという特徴がある
- **Twofish**: Blowfishの進化版で、一般的にAESの代替として利用されることがある

## 適用例

- **データベース暗号化**: 大量のデータを効率的に暗号化・復号するために使用される
- **ファイル暗号化**: 個別のファイルを保護するために対称鍵暗号が使われる
- **ネットワーク通信**: SSL/TLSなどのプロトコルで、セッションキーとして対称鍵が使用され、高速なデータ転送を実現している
- **ディスク暗号化**: 磁気ディスクやSSDなどのストレージを保護するために使われる

## 鍵管理の課題

対称鍵暗号の主要な課題は、鍵管理と鍵配送の問題。鍵が安全に伝送されないと、その全ての通信のセキュリティが破られる可能性がある

- **鍵配送**: 対称鍵は事前に安全なチャネルを通じて交換する必要がある。事実上、鍵を安全に配送する方法がないと一切の暗号化操作が意味を無さない
- **鍵の数**: 通信パートナーが増えると必要とされる対称鍵の数も増え、管理が複雑になります。例えば、N人のユーザーが全員で対称鍵通信する場合、N(N-1)/2個の鍵が必要になる

## セキュリティ対策

鍵管理に関しては、以下のような方法が用いられる

- **キーエクスチェンジプロトコル**: Diffie-Hellman鍵交換などのプロトコルを用いて安全に鍵を交換する
- **ハードウェアセキュリティモジュール（HSM）**: 鍵を安全に保管するための専用ハードウェア
- **頻繁なキー変更**: 定期的に鍵を変更することで、鍵の漏洩リスクを最小限に抑えることができる

## AES-128とAES-256の比較

主にキー長とセキュリティの強度で違いがあるが、簡単に言えば、AES-128はより高速で効率的だが、AES-256はさらに高いセキュリティを提供する。どちらを選択するかは、具体的な用途やセキュリティの要件によって異なる。場合によっては、パフォーマンスとセキュリティのバランスを考慮して選択する必要がある。

### キー長

- **AES-128**: 128ビットのキーを使用 (16byte)。
- **AES-256**: 256ビットのキーを使用 (32byte)。

キー長が2倍になると、全く新しい鍵の試行数が計算が2^128倍になる。つまり、AES-256のキー空間はAES-128に比べて非常に広大。

### セキュリティ強度

- **AES-128**: 現在のところ非常に安全とされているが、理論的には量子コンピュータに対して脆弱となる可能性がある。具体的には、Shorアルゴリズムを使用した場合、AES-128は「量子ハーフ」の安全性しか持たず、効果的な鍵の長さは64ビットと同等になる。
- **AES-256**: 現代のコンピュータ技術に対しては破るのがきわめて難しいとされている。量子コンピュータにおいても、効果的な鍵の長さは128ビットとなり、量子通称的なアタックに対しても非常に高いセキュリティを提供する。

### パフォーマンス

- **AES-128**: AES-256に比べて暗号化・復号の操作が若干高速。処理時間や計算資源の消費が少ないため、システム全体の効率が維持しやすい。
- **AES-256**: キーが長い分、処理にかかる計算量が多くなるため、AES-128に比べて動作速度は遅くなる。特にリソースが限られている環境ではパフォーマンスの差が顕著になる可能性がある。

### ラウンド数

- **AES-128**: 10ラウンドの暗号化プロセス。
- **AES-256**: 14ラウンドの暗号化プロセス。

### 使用例と推奨

- **AES-128**: ほとんどの一般的用途に十分なセキュリティを提供する。低消費電力デバイスやリアルタイム性が求められるアプリケーションではAES-128が好まれることがある。
- **AES-256**: 最高レベルのセキュリティが求められる用途、例えば政府機関、軍事、金融のデータ暗号化などで使用されることが多い。
